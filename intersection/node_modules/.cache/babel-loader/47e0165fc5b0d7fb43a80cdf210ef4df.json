{"ast":null,"code":"import 'd3-selection';\nimport 'd3-transition';\nimport { tip } from '../functions';\nimport * as R from 'ramda';\n\nclass Intersection {\n  constructor(chart, data, scales, dims) {\n    this.enter = () => {\n      //to add ticks step or x values array len instead of the 8 in  this.dims.innerHeight/8\n      var xbandSize = this.scales.xScale.bandwidth();\n      var ybandSize = this.scales.yScale.bandwidth();\n      this.allIntersection.enter().append('rect').attr('class', 'intersection').attr('x', (d, i) => {\n        return this.scales.xScale(d.x, d.y) - xbandSize / 2;\n      }).attr('y', d => this.scales.yScale(d.y) + ybandSize / 2).style('width', xbandSize).style('opacity', 0.8).attr('height', ybandSize).attr('fill', d => d.color).call(tip).on(\"mouseover\", tip.show).on('mouseout', tip.hide);\n    };\n\n    this.updateData = newData => {\n      this.data = newData;\n      var xbandSize = this.scales.xScale.bandwidth();\n      var ybandSize = this.scales.yScale.bandwidth();\n      this.allIntersection = this.chart.append('g').attr('class', 'intersectionMarks').selectAll('.intersection').data(this.data);\n      this.allIntersection.attr('x', (d, i) => {\n        return this.scales.xScale(d.x, d.y) - xbandSize / 2;\n      }).attr('y', d => this.scales.yScale(d.y) + ybandSize / 2).style('width', xbandSize).attr('height', ybandSize).attr('fill', d => d.color).on('mouseover', tip.show).on('mouseout', tip.hide);\n      this.enter();\n    };\n\n    this.exit = () => {\n      this.allIntersection.exit().remove();\n    };\n\n    this.updateScales = newScales => {\n      this.scales = newScales;\n      var xbandSize = this.scales.xScale.bandwidth();\n      var ybandSize = this.scales.yScale.bandwidth();\n      this.allIntersection = this.chart.selectAll('.intersection').attr('x', (d, i) => {\n        return this.scales.xScale(d.x, d.y) - xbandSize / 2;\n      }).attr('y', d => this.scales.yScale(d.y) + ybandSize / 2).style('width', xbandSize).attr('height', ybandSize);\n    };\n\n    this.chart = chart;\n    this.scales = scales;\n    this.dims = dims;\n    this.updateData(data);\n  }\n\n}\n\nexport default Intersection;","map":{"version":3,"sources":["/Users/marinas/WORK/GIT/ReactD3-projects/React-projects/size_matrix/src/matrix/utilities/Intersection.js"],"names":["tip","R","Intersection","constructor","chart","data","scales","dims","enter","xbandSize","xScale","bandwidth","ybandSize","yScale","allIntersection","append","attr","d","i","x","y","style","color","call","on","show","hide","updateData","newData","selectAll","exit","remove","updateScales","newScales"],"mappings":"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","sourcesContent":["import  'd3-selection';\nimport 'd3-transition';\nimport { tip} from '../functions';\nimport * as R from 'ramda';\n\nclass Intersection {\n\tconstructor(chart, data, scales,dims){\n\t    this.chart = chart;\n\t    this.scales = scales;\n\t    this.dims = dims;\n\t    this.updateData(data);\n\t};\n\n\tenter=()=>{\n\t\t//to add ticks step or x values array len instead of the 8 in  this.dims.innerHeight/8\n\t\tvar xbandSize = this.scales.xScale.bandwidth();\n    \tvar ybandSize = this.scales.yScale.bandwidth();\n\n        this.allIntersection.enter()\n\t\t\t.append('rect')\n\t\t\t.attr('class', 'intersection')\n\t      \t.attr('x', (d,i)=>{return this.scales.xScale(d.x,d.y)- xbandSize/2})\n        \t.attr('y', (d)=>this.scales.yScale(d.y) + ybandSize/2)\n        \t.style('width', xbandSize)\n        \t.style('opacity', 0.8)\n        \t.attr('height', ybandSize)\n        \t.attr('fill', (d) => d.color)\n        \t.call(tip)\n\t        .on(\"mouseover\", tip.show)\n\t        .on('mouseout', tip.hide);\n\n\t};\n\tupdateData=(newData)=>{\n\t    this.data = newData;\n\t    var xbandSize = this.scales.xScale.bandwidth();\n    \tvar ybandSize = this.scales.yScale.bandwidth();\n\n\t    this.allIntersection =\n\t      this.chart.append('g')\n                .attr('class', 'intersectionMarks')\n\t      \t\t.selectAll('.intersection').data(this.data);\n\n\t    this.allIntersection\n\t\t\t.attr('x', (d,i)=>{return this.scales.xScale(d.x,d.y)- xbandSize/2})\n        \t.attr('y', (d)=>this.scales.yScale(d.y) + ybandSize/2)\n        \t.style('width', xbandSize)\n        \t.attr('height', ybandSize)\n\t        .attr('fill', (d) => d.color)\n\t        .on('mouseover', tip.show)\n        \t.on('mouseout', tip.hide)\n\t    this.enter();\n\t};\n\texit=()=>{\n\t\tthis.allIntersection.exit().remove();\n\t};\n\tupdateScales=(newScales)=>{\n    \n    this.scales = newScales;\n\n    var xbandSize = this.scales.xScale.bandwidth();\n    var ybandSize = this.scales.yScale.bandwidth();\n\n    this.allIntersection =\n      this.chart.selectAll('.intersection')\n        .attr('x', (d,i)=>{return this.scales.xScale(d.x,d.y)- xbandSize/2})\n        .attr('y', (d)=>this.scales.yScale(d.y) + ybandSize/2)\n        .style('width', xbandSize)\n        .attr('height', ybandSize)\n\n  };\n\n\n}\n\nexport default Intersection;"]},"metadata":{},"sourceType":"module"}