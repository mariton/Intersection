{"ast":null,"code":"import 'd3-selection';\nimport 'd3-force';\nimport * as d3 from 'd3';\nimport d3Tip from 'd3-tip';\nimport { tip } from '../functions';\n\nclass Circles {\n  constructor(chart, data, scales, _dims) {\n    this.updateData = (newData, dims) => {\n      this.data = newData;\n      this.dims = dims;\n      this.allCircles = this.chart.append('g').attr('class', 'marks').selectAll('.myCircle').data(this.data);\n      this.allCircles.attr('cx', (d, i) => this.scales.xScale(d.x, d.y)).attr('cy', d => this.scales.yScale(d.y)).attr('fill', d => d.color).on('mouseover', tip.show).on('mouseout', tip.hide);\n      this.enter();\n    };\n\n    this.enter = () => {\n      var simulation = d3.forceSimulation(this.allCircles).force(\"collide\", d3.forceCollide().strength(.01).radius(30).iterations(1)); // Force that avoids circle overlapping\n\n      this.allCircles.enter().append('circle').attr('class', 'myCircle').attr('cx', (d, i) => this.scales.xScale(d.x, d.y)).attr('cy', (d, i) => this.scales.yScale(d.y)).attr('r', d => d.value * 3).attr('fill', d => d.color).attr(\"opacity\", 0.8).call(tip).on(\"mouseover\", tip.show).on('mouseout', tip.hide);\n      this.exit();\n    };\n\n    this.exit = () => {\n      this.allCircles.exit().remove();\n    };\n\n    this.updateScales = (newScales, dims) => {\n      this.dims = dims;\n      this.scales = newScales;\n      this.allCircles = this.chart.selectAll('.myCircle').attr('cx', (d, i) => this.scales.xScale(d.x, d.y)).attr('cy', d => this.scales.yScale(d.y)).attr('r', d => {\n        return d.value * 3 - d.value * 3 / this.dims.innerWidth * 100;\n      });\n    };\n\n    this.chart = chart;\n    this.dims = _dims;\n    this.scales = scales;\n    this.updateData(data);\n  }\n\n}\n\n;\nexport default Circles;","map":{"version":3,"sources":["/Users/marinas/WORK/GIT/ReactD3-projects/React-projects/size_matrix/src/matrix/utilities/Circles.js"],"names":["d3","d3Tip","tip","Circles","constructor","chart","data","scales","dims","updateData","newData","allCircles","append","attr","selectAll","d","i","xScale","x","y","yScale","color","on","show","hide","enter","simulation","forceSimulation","force","forceCollide","strength","radius","iterations","value","call","exit","remove","updateScales","newScales","innerWidth"],"mappings":"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","sourcesContent":["import  'd3-selection';\nimport 'd3-force';\n\nimport * as d3 from 'd3'\nimport d3Tip from 'd3-tip';\n\nimport { tip} from '../functions';\n\nclass Circles {\n  constructor(chart, data, scales, dims){\n    this.chart = chart;\n    this.dims = dims;\n    this.scales = scales;\n    this.updateData(data);\n  };\n\n  updateData=(newData, dims)=>{\n    this.data = newData;\n    this.dims = dims;\n\n    this.allCircles =\n    this.chart.append('g')\n                .attr('class', 'marks')\n                .selectAll('.myCircle').data(this.data);\n    \n    this.allCircles\n        .attr('cx', (d,i)=>this.scales.xScale(d.x,d.y))\n        .attr('cy', (d)=>this.scales.yScale(d.y))\n        .attr('fill', (d) => d.color)\n        .on('mouseover', tip.show)\n        .on('mouseout', tip.hide)\n    this.enter();\n  };\n  enter=()=>{\n     var simulation = d3.forceSimulation(this.allCircles)\n        .force(\"collide\", d3.forceCollide().strength(.01).radius(30).iterations(1)) // Force that avoids circle overlapping\n\n    this.allCircles.enter()\n        .append('circle')\n        .attr('class', 'myCircle')\n        .attr('cx', (d,i)=>this.scales.xScale(d.x,d.y))\n        .attr('cy', (d, i)=>this.scales.yScale(d.y))\n        .attr('r', (d) => d.value*3)\n        .attr('fill', (d) => d.color)\n        .attr(\"opacity\", 0.8)\n        .call(tip)\n        .on(\"mouseover\", tip.show)\n        .on('mouseout', tip.hide)\n\n        \n    this.exit();\n  };\n  exit=()=>{\n    this.allCircles.exit().remove();\n  };\n  updateScales=(newScales, dims)=>{\n    this.dims = dims;\n    this.scales = newScales;\n\n\n    this.allCircles =\n      this.chart.selectAll('.myCircle')\n          .attr('cx', (d,i)=>this.scales.xScale(d.x,d.y))\n          .attr('cy', (d)=>this.scales.yScale(d.y))\n          .attr('r', (d) => {\n            return (d.value*3 - ((d.value*3)/this.dims.innerWidth)*100) } )\n  };\n};\nexport default Circles;"]},"metadata":{},"sourceType":"module"}